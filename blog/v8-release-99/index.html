<!doctype html><html lang=zh-CN><meta charset=utf-8><title>V8 release v9.9 · V8</title><meta content="width=device-width" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=" js"</script><meta content="V8 release v9.9 brings new internationalization APIs." name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li class=active><a href=/blog/ >博客</a><li><a href=/docs/ >文档</a><li><a href=/tools/ >工具</a><li><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline>V8 release v9.9</h1><p class=meta>发布时间 <time datetime="2022-01-31 00:00:00" itemprop=datePublished title="2022-01-31 00:00:00">2022-01-31</time> · 标签： <a href=/blog/tags/release/ class=tag>release</a></header><div itemprop=articleBody><p>Every four weeks, we create a new branch of V8 as part of our <a href=https://v8.dev/docs/release-process>release process</a>. Each version is branched from V8’s Git main immediately before a Chrome Beta milestone. Today we’re pleased to announce our newest branch, <a href=https://chromium.googlesource.com/v8/v8.git/+log/branch-heads/9.9>V8 version 9.9</a>, which is in beta until its release in coordination with Chrome 99 Stable in several weeks. V8 v9.9 is filled with all sorts of developer-facing goodies. This post provides a preview of some of the highlights in anticipation of the release.<h2 id=javascript>JavaScript <a href=#javascript class=bookmark>#</a></h2><h3 id=intl.locale-extensions>Intl.Locale extensions <a href=#intl.locale-extensions class=bookmark>#</a></h3><p>In v7.4 we launched the <a href=https://v8.dev/blog/v8-release-74#intl.locale><code>Intl.Locale</code> API</a>. With v9.9, we added seven new properties to the <code>Intl.Locale</code> object: <code>calendars</code>, <code>collations</code>, <code>hourCycles</code>, <code>numberingSystems</code>, <code>timeZones</code>, <code>textInfo</code>, and <code>weekInfo</code>.<p>The <code>calendars</code>, <code>collations</code>, <code>hourCycles</code>, <code>numberingSystems</code>, and <code>timeZones</code> property of <code>Intl.Locale</code> return an array of preferred identifiers of those in common use, designed to be use with other <code>Intl</code> API:<pre class=language-js><code class=language-js><span class="token keyword">const</span> arabicEgyptLocale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>Locale</span><span class="token punctuation">(</span><span class="token string">'ar-EG'</span><span class="token punctuation">)</span><br><span class="token comment">// ar-EG</span><br>arabicEgyptLocale<span class="token punctuation">.</span>calendars<br><span class="token comment">// ['gregory', 'coptic', 'islamic', 'islamic-civil', 'islamic-tbla']</span><br>arabicEgyptLocale<span class="token punctuation">.</span>collations<br><span class="token comment">// ['compat', 'emoji', 'eor']</span><br>arabicEgyptLocale<span class="token punctuation">.</span>hourCycles<br><span class="token comment">// ['h12']</span><br>arabicEgyptLocale<span class="token punctuation">.</span>numberingSystems<br><span class="token comment">// ['arab']</span><br>arabicEgyptLocale<span class="token punctuation">.</span>timeZones<br><span class="token comment">// ['Africa/Cairo']</span></code></pre><p>The <code>textInfo</code> property of <code>Intl.Locale</code> returns an object to specify the information related to text. Currently it only has one property, <code>direction</code>, to indicate default directionality for text in the locale. It is designed to be used for <a href=https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/dir>HTML <code>dir</code> attribute</a> and <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/direction>CSS <code>direction</code> property</a>. It indicates the ordering of characters - <code>ltr</code> (left-to-right) or <code>rtl</code> (right-to-left):<pre class=language-js><code class=language-js>arabicEgyptLocale<span class="token punctuation">.</span>textInfo<br><span class="token comment">// { direction: 'rtl' }</span><br>japaneseLocale<span class="token punctuation">.</span>textInfo<br><span class="token comment">// { direction: 'ltr' }</span><br>chineseTaiwanLocale<span class="token punctuation">.</span>textInfo<br><span class="token comment">// { direction: 'ltr' }</span></code></pre><p>The <code>weekInfo</code> property of <code>Intl.Locale</code> returns an object to specify the information related to week. The <code>firstDay</code> property in the return object is a number, ranging from 1 to 7, indicating which day of the week is considered the first day, for calendar purposes. 1 specifies Monday, 2 - Tuesday, 3 - Wednesday, 4 - Thursday, 5 - Friday, 6 - Saturday, and 7 - Sunday. The <code>minimalDays</code> property in the return object is the minimum days required in the first week of a month or year, for calendar purposes. The <code>weekend</code> property in the return object is an array of integers, usually with two elements, encoded the same as <code>firstDay</code>. It indicates which days of the week are considered as part of the 'weekend', for calendar purposes. Notice that the number of days in the weekend are different in each locale and may not be contiguous.<pre class=language-js><code class=language-js>arabicEgyptLocale<span class="token punctuation">.</span>weekInfo<br><span class="token comment">// {firstDay: 6, weekend: [5, 6], minimalDays: 1}</span><br><span class="token comment">// First day of the week is Saturday. Weekend is Friday and Saturday.</span><br><span class="token comment">// The first week of a month or a year is a week which has at least 1</span><br><span class="token comment">// day in that month or year.</span></code></pre><h3 id=intl-enumeration>Intl Enumeration <a href=#intl-enumeration class=bookmark>#</a></h3><p>In v9.9, we added a new function <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/supportedValuesOf><code>Intl.supportedValuesOf(code)</code></a> that returns the array of supported identifiers in v8 for the Intl APIs. The supported <code>code</code> values are <code>calendar</code>, <code>collation</code>, <code>currency</code>,<code>numberingSystem</code>, <code>timeZone</code>, and <code>unit</code>. The information in this new method is designed to allow web developers to easily discover which value is supported by the implementation.<pre class=language-js><code class=language-js>Intl<span class="token punctuation">.</span><span class="token function">supportedValuesOf</span><span class="token punctuation">(</span><span class="token string">'calendar'</span><span class="token punctuation">)</span><br><span class="token comment">// ['buddhist', 'chinese', 'coptic', 'dangi', ...]</span><br><br>Intl<span class="token punctuation">.</span><span class="token function">supportedValuesOf</span><span class="token punctuation">(</span><span class="token string">'collation'</span><span class="token punctuation">)</span><br><span class="token comment">// ['big5han', 'compat', 'dict', 'emoji', ...]</span><br><br>Intl<span class="token punctuation">.</span><span class="token function">supportedValuesOf</span><span class="token punctuation">(</span><span class="token string">'currency'</span><span class="token punctuation">)</span><br><span class="token comment">// ['ADP', 'AED', 'AFA', 'AFN', 'ALK', 'ALL', 'AMD', ...]</span><br><br>Intl<span class="token punctuation">.</span><span class="token function">supportedValuesOf</span><span class="token punctuation">(</span><span class="token string">'numberingSystem'</span><span class="token punctuation">)</span><br><span class="token comment">// ['adlm', 'ahom', 'arab', 'arabext', 'bali', ...]</span><br><br>Intl<span class="token punctuation">.</span><span class="token function">supportedValuesOf</span><span class="token punctuation">(</span><span class="token string">'timeZone'</span><span class="token punctuation">)</span><br><span class="token comment">// ['Africa/Abidjan', 'Africa/Accra', 'Africa/Addis_Ababa', 'Africa/Algiers', ...]</span><br><br>Intl<span class="token punctuation">.</span><span class="token function">supportedValuesOf</span><span class="token punctuation">(</span><span class="token string">'unit'</span><span class="token punctuation">)</span><br><span class="token comment">// ['acre', 'bit', 'byte', 'celsius', 'centimeter', ...]</span></code></pre><h2 id=v8-api>V8 API <a href=#v8-api class=bookmark>#</a></h2><p>Please use <code>git log branch-heads/9.8..branch-heads/9.9 include/v8\*.h</code> to get a list of the API changes.<p>Developers with an active V8 checkout can use <code>git checkout -b 9.9 -t branch-heads/9.9</code> to experiment with the new features in V8 v9.9. Alternatively you can <a href=https://www.google.com/chrome/browser/beta.html>subscribe to Chrome’s Beta channel</a> and try the new features out yourself soon.</div><footer><div><picture><source srcset="/_img/avatars/ingvar-stepanyan.avif, /_img/avatars/ingvar-stepanyan@2x.avif 2x" type=image/avif><img alt="" height=96 loading=lazy src=/_img/avatars/ingvar-stepanyan.jpg srcset="/_img/avatars/ingvar-stepanyan@2x.jpg 2x" width=96></picture><p>作者：Ingvar Stepanyan (<a href=https://twitter.com/RReverser>@RReverser</a>), at his 99%.</div><a href=https://twitter.com/v8js/status/1488190967727411210 class=retweet>Retweet this article!</a></footer></article></main><footer id=footer><div><nav><a href=https://v8.dev/blog/v8-release-99>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/blog/v8-release-99.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>